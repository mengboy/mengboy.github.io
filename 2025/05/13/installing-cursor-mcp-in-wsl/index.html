<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 | Mengboy&#39;s Blog</title>
<meta name="keywords" content="Cursor, MCP, WSL, Windows, 开发, 教程">
<meta name="description" content="对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。">
<meta name="author" content="mengboy">
<link rel="canonical" href="https://www.mfun.ink/2025/05/13/installing-cursor-mcp-in-wsl/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b407885730516c77be0e6285ab84c0e6c304358f0d1d813f99cea6add2695ff3.css" integrity="sha256-tAeIVzBRbHe&#43;DmKFq4TA5sMENY8NHYE/mc6mrdJpX/M=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.mfun.ink/images/site/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.mfun.ink/images/site/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.mfun.ink/images/site/favicon.png">
<link rel="apple-touch-icon" href="https://www.mfun.ink/images/site/favicon.png">
<link rel="mask-icon" href="https://www.mfun.ink/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://www.mfun.ink/2025/05/13/installing-cursor-mcp-in-wsl/">
<link rel="alternate" hreflang="en" href="https://www.mfun.ink/en/2025/05/13/installing-cursor-mcp-in-wsl/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2789089615690497" crossorigin="anonymous"></script>


<script>
     window.adsbygoogle = window.adsbygoogle || [];
     
</script>





<script async src="https://www.googletagmanager.com/gtag/js?id=G-PPJ7YW67PL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PPJ7YW67PL');
</script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PPJ7YW67PL"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-PPJ7YW67PL');
        }
      </script><meta property="og:url" content="https://www.mfun.ink/2025/05/13/installing-cursor-mcp-in-wsl/">
  <meta property="og:site_name" content="Mengboy&#39;s Blog">
  <meta property="og:title" content="在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验">
  <meta property="og:description" content="对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-05-13T23:17:00+08:00">
    <meta property="article:modified_time" content="2025-05-13T23:17:00+08:00">
    <meta property="article:tag" content="Cursor">
    <meta property="article:tag" content="MCP">
    <meta property="article:tag" content="Wsl">
    <meta property="article:tag" content="Windows">
    <meta property="article:tag" content="开发">
    <meta property="article:tag" content="教程">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验">
<meta name="twitter:description" content="对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.mfun.ink/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验",
      "item": "https://www.mfun.ink/2025/05/13/installing-cursor-mcp-in-wsl/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验",
  "name": "在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验",
  "description": "对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。\n",
  "keywords": [
    "Cursor", "MCP", "WSL", "Windows", "开发", "教程"
  ],
  "articleBody": "对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。\nMCP 是什么？ MCP (Model Control Protocol，模型控制协议) 是一种协议，允许像 Cursor 中的 AI 模型安全地与各种工具和数据源进行交互。这些工具，或称\"MCP 服务器\"，可以执行诸如 Web 搜索、文件系统操作甚至浏览器交互等操作，从而为 AI 提供更丰富的上下文和更多功能。\n为什么要在 WSL 中运行 MCP 服务器？ 一致性： 将你的整个开发工具链保持在你习惯的 Linux 环境中。 简化的路径： 避免在访问文件系统的工具中处理 Windows 与 Linux 路径转换的复杂性。 利用 Linux 特定的工具： 某些 MCP 服务器或其依赖项可能在 Linux 环境中运行得更好或仅能在 Linux 环境中运行。 隔离性： 将 MCP 服务器所需的 Node.js 版本和其他依赖项管理在 WSL 内部，与你的 Windows 系统分开。 先决条件 在开始之前，请确保你具备以下条件：\n已安装 WSL： 一个正常工作的 WSL，并已设置好一个 Linux 发行版 (例如 Ubuntu)。 WSL 中的 Node.js 和 npx： Node.js 和 npx (npm 自带) 必须安装在你的 WSL 发行版内部。 强烈建议在 WSL 中使用像 nvm (Node Version Manager) 这样的版本管理器来管理 Node.js 版本。这有助于避免权限问题，并允许轻松切换 Node.js 版本。 Cursor IDE： 已安装在你的 Windows 计算机上。 配置步骤 在 WSL 中运行 MCP 服务器的关键是告诉 Cursor 如何使用 WSL 命令行界面启动它们。这通过编辑 mcp.json 文件来完成。\n1. 定位或创建 mcp.json Cursor将其 MCP 服务器配置存储在一个名为 mcp.json 的文件中。在 Windows 上，你通常可以在以下位置找到此文件：\nC:\\\\Users\\\\\\\\.cursor\\\\mcp.json\n将 替换为你的实际 Windows 用户名。如果该文件或 .cursor 目录不存在，Cursor 可能会在你首次尝试通过其 UI 添加 MCP 服务器时创建它，或者你可能需要手动创建它。\n2. 理解 mcp.json 结构 mcp.json 文件包含一个 JSON 对象，其中 mcpServers下的每个键代表一个已配置的 MCP 服务器。这是一个基本结构：\n{ \"mcpServers\": { \"your-mcp-server-name\": { // 你的 MCP 服务器名称 \"command\": \"executable_or_wsl\", // 可执行文件或 wsl \"args\": [\"argument1\", \"argument2\", \"command_to_run_in_wsl\"], // 参数 \"enabled\": true // 是否启用 // 其他选项，如 \"env\", \"workingDirectory\" 也可以指定 } } } 3. WSL 的核心配置 要在 WSL 中运行 MCP 服务器 (通常是一个 npx 命令)，你需要按如下方式配置服务器条目：\n\"command\": 将此设置为 \"wsl\"。\n\"args\": 这将是一个数组。第一个元素告诉 wsl 使用哪个 shell 并执行一个命令字符串。最后一个元素是命令字符串本身。\nbash 示例: [\"bash\", \"-c\", \"npx @some-mcp/package --port {{port}}\"] zsh 示例: [\"zsh\", \"-c\", \"npx @some-mcp/package --port {{port}}\"] (注意: {{port}} 是 Cursor 通常用来注入端口号供 MCP 服务器侦听的占位符。如果 MCP 服务器需要端口，请查阅其特定文档。)\n4. 处理 Shell 环境 (对 nvm 用户至关重要) 一个常见的问题是，当 Cursor 调用 wsl ... npx ... 时，可能找不到 npx 命令，或者它可能未使用你期望的 Node.js 版本 (特别是如果你使用 nvm)。这是因为 wsl 启动的非交互式 shell 会话可能不会加载你的完整 shell 配置文件 (例如 .bashrc、.zshrc)，而 nvm 和其他 PATH 修改通常是在这些文件中配置的。\n以下是两种可靠的解决方案：\n解决方案 A：使用 Shell 脚本 (推荐，更清晰)\n此方法涉及在你的 WSL 环境中创建一个小型 shell 脚本，该脚本负责设置环境然后运行 npx 命令。\n在 WSL 中创建脚本： 打开你的 WSL 终端并创建一个脚本，例如 ~/run_browsermcp.sh：\n#!/bin/zsh # 如果你使用 bash，则使用 #!/bin/bash # 加载 shell 的 rc 文件以配置 nvm 和其他环境变量 # 如果需要，请调整 rc 文件的路径 if [ -f \"$HOME/.zshrc\" ]; then source \"$HOME/.zshrc\" elif [ -f \"$HOME/.bashrc\" ]; then source \"$HOME/.bashrc\" fi # 用于调试：检查正在使用哪个 npx 以及 Node 版本 # which npx # node -v # 你的 MCP 服务器的实际 npx 命令 # 替换为你需要的特定 MCP 服务器命令 npx @browsermcp/mcp@latest --port {{port}} 一个例子：\n#!/bin/sh zsh -c \"source /home/vector/.zshrc \u0026\u0026 npx @browsermcp/mcp@latest\" (注意：直接调用 zsh -c。如果使用此方法，请确保脚本本身是可执行的，并且 .zshrc 的路径正确。)\n使脚本可执行： 在你的 WSL 终端中：\nchmod +x ~/run_browsermcp.sh (根据需要调整脚本名称)。\n配置 mcp.json： 修改你的 mcp.json 以执行此脚本。如果你的 WSL 用户名是 vector，你使用 zsh，并且脚本位于 /home/vector/run_browsermcp.sh：\n{ \"mcpServers\": { \"browsermcp-wsl\": { // 给它一个描述性的名称 \"command\": \"wsl\", \"args\": [ \"zsh\", // 或 \"bash\" \"-c\", \"/home/vector/run_browsermcp.sh\" // WSL 中脚本的完整路径 ], \"enabled\": true } } } 这与你为 browsermcp 提供的 mcp.json 结构相匹配：\n{ \"mcpServers\": { \"browsermcp\": { \"command\": \"wsl\", \"args\": [ \"zsh\", \"-c\", \"/home/vector/browsermcp.sh\" // 你示例中的路径 ] } } } 解决方案 B：直接在 mcp.json 中加载 (Sourcing)\n你可以尝试直接在 args 中加载你的 rc 文件。根据 rc 文件的复杂性，这有时可能不太可靠，但如果可行，则更为简洁。\n{ \"mcpServers\": { \"my-mcp-server-bash\": { \"command\": \"wsl\", \"args\": [ \"bash\", \"-ic\", // 注意：-i 表示交互式，可能有助于加载 rc 文件 \"source ~/.bashrc \u0026\u0026 npx @some-mcp/package --port {{port}}\" ], \"enabled\": true }, \"my-mcp-server-zsh\": { \"command\": \"wsl\", \"args\": [ \"zsh\", \"-ic\", // 注意：-i 表示交互式 \"source ~/.zshrc \u0026\u0026 npx @some-mcp/package --port {{port}}\" ], \"enabled\": true } } } 如果使用 nvm 并且上述方法仍然失败，你可能需要提供 nvm.sh 和由 nvm 安装的 npx 可执行文件的绝对路径：\n{ \"mcpServers\": { \"my-mcp-nvm-direct\": { \"command\": \"wsl\", \"args\": [ \"bash\", // 或 \"zsh\" \"-c\", // 相应地替换 /home/your_user 和 YOUR_NODE_VERSION \"source /home/your_user/.nvm/nvm.sh \u0026\u0026 /home/your_user/.nvm/versions/node/vXX.YY.Z/bin/npx @some-mcp/package --port {{port}}\" ], \"enabled\": true } } } 要在加载 nvm.sh 并使用 nvm use 选择 Node 版本后找到 npx 的完整路径，请在 WSL 终端中运行 which npx。\n5. 示例：配置浏览器交互 MCP 让我们以 @browsermcp/mcp 为例，因为它很常见。\n使用解决方案 A (如前定义的 shell 脚本 ~/run_browsermcp.sh)：\n{ \"mcpServers\": { \"browsermcp-wsl\": { \"command\": \"wsl\", \"args\": [ \"zsh\", // 如果你的脚本和环境使用 bash，则为 \"bash\" \"-c\", \"/home/YOUR_WSL_USERNAME/run_browsermcp.sh\" // 调整路径 ], \"enabled\": true, \"env\": { // 可选：如果 MCP 服务器需要特定的环境变量 // \"DEBUG\": \"true\" } } } } 请记住将 YOUR_WSL_USERNAME 替换为你的实际 WSL 用户名。\n验证 保存 mcp.json 后：\n重新启动 Cursor 或转到 Cursor 设置 -\u003e 功能 -\u003e MCP，然后单击某个服务器旁边或所有 MCP 服务器的刷新图标。 MCP 设置中服务器名称旁边的绿点表示 Cursor 已成功连接到它。 你可能会看到一个由 wsl 启动的新终端窗口弹出。此窗口必须保持打开状态才能使 MCP 服务器正常工作。这是以这种方式运行 MCP 服务器时的预期行为。 通过要求 Cursor 执行使用该 MCP 服务器的操作来测试它 (例如，对于 @browsermcp/mcp，在设置好配套的浏览器扩展后，要求它\"截取当前浏览器标签页的屏幕截图\")。 故障排除 npx: command not found 或 Node 版本错误： 这几乎总是意味着 WSL 内的 shell 环境未正确设置。 仔细检查 shell 脚本或直接命令中的路径。 确保 nvm 已正确加载。 如果使用 nvm，请尝试在脚本或命令字符串的开头明确添加 export NVM_DIR=\"$HOME/.nvm\" 和 [ -s \"$NVM_DIR/nvm.sh\" ] \u0026\u0026 \\. \"$NVM_DIR/nvm.sh\"。 验证 node 和 npx 确实已安装在你的 WSL 发行版中，并且在加载 rc 文件后可以访问。 MCP 服务器无法连接 (没有绿点)： 检查弹出的 WSL 终端窗口中的输出。它可能包含错误消息。 确保 MCP 服务器的 npx 命令正确，并包含任何必要的参数，如 --port {{port}}。某些 MCP 如果未指定端口，可能会自动分配端口。 防火墙问题：在使用 WSL2 的网络模型时不太常见，但请确保 Windows 防火墙没有阻止与 WSL 的连接。 “空白\"终端窗口： 如前所述，每个通过 wsl 启动的 MCP 服务器都会打开一个终端窗口。这是正常的。关闭它将停止 MCP 服务器。 结论 配置 Cursor 以在你的 WSL 环境中运行 MCP 服务器，可在 Windows 上提供简化且强大的开发设置。通过仔细设置你的 mcp.json 并确保正确加载 WSL shell 环境，你可以将 AI 功能无缝集成到基于 Linux 的工作流程中。对于处理由 nvm 等工具管理的环境，shell 脚本方法 (解决方案 A) 通常是最稳健的方法。\n祝你使用 Cursor 和 WSL 编码愉快！ ",
  "wordCount" : "2826",
  "inLanguage": "zh-cn",
  "datePublished": "2025-05-13T23:17:00+08:00",
  "dateModified": "2025-05-13T23:17:00+08:00",
  "author":{
    "@type": "Person",
    "name": "mengboy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.mfun.ink/2025/05/13/installing-cursor-mcp-in-wsl/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mengboy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.mfun.ink/images/site/favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.mfun.ink/" accesskey="h" title="Mengboy&#39;s Blog (Alt + H)">Mengboy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.mfun.ink/en/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.mfun.ink/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://www.mfun.ink/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://www.mfun.ink/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://www.mfun.ink/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://www.mfun.ink/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://www.mfun.ink/about/" title="关于我">
                    <span>关于我</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.mfun.ink/">Home</a>&nbsp;»&nbsp;<a href="https://www.mfun.ink/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验
    </h1>
    <div class="post-meta"><span title='2025-05-13 23:17:00 +0800 CST'>May 13, 2025</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;mengboy&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://www.mfun.ink/en/2025/05/13/installing-cursor-mcp-in-wsl/">En</a>
    </li>
</ul>

</div>
  </header> 
  <div class="post-content"><p>对于喜欢 Linux 工具的强大功能但在 Windows 上工作的开发人员来说，Windows Subsystem for Linux (WSL) 是一个改变游戏规则的工具。Cursor，这款 AI 优先的代码编辑器，可以通过与模型控制程序 (MCP) 服务器集成来进一步增强此设置。直接在你的 WSL 环境中运行这些 MCP 服务器可以使你的开发工作流程保持整洁和统一。本指南将引导你完成配置 Cursor 以使用在 WSL 中运行的 MCP 服务器的步骤。</p>
<h2 id="mcp-是什么">MCP 是什么？<a hidden class="anchor" aria-hidden="true" href="#mcp-是什么">#</a></h2>
<p>MCP (Model Control Protocol，模型控制协议) 是一种协议，允许像 Cursor 中的 AI 模型安全地与各种工具和数据源进行交互。这些工具，或称&quot;MCP 服务器&quot;，可以执行诸如 Web 搜索、文件系统操作甚至浏览器交互等操作，从而为 AI 提供更丰富的上下文和更多功能。</p>
<h2 id="为什么要在-wsl-中运行-mcp-服务器">为什么要在 WSL 中运行 MCP 服务器？<a hidden class="anchor" aria-hidden="true" href="#为什么要在-wsl-中运行-mcp-服务器">#</a></h2>
<ul>
<li><strong>一致性：</strong> 将你的整个开发工具链保持在你习惯的 Linux 环境中。</li>
<li><strong>简化的路径：</strong> 避免在访问文件系统的工具中处理 Windows 与 Linux 路径转换的复杂性。</li>
<li><strong>利用 Linux 特定的工具：</strong> 某些 MCP 服务器或其依赖项可能在 Linux 环境中运行得更好或仅能在 Linux 环境中运行。</li>
<li><strong>隔离性：</strong> 将 MCP 服务器所需的 Node.js 版本和其他依赖项管理在 WSL 内部，与你的 Windows 系统分开。</li>
</ul>
<h2 id="先决条件">先决条件<a hidden class="anchor" aria-hidden="true" href="#先决条件">#</a></h2>
<p>在开始之前，请确保你具备以下条件：</p>
<ol>
<li><strong>已安装 WSL：</strong> 一个正常工作的 WSL，并已设置好一个 Linux 发行版 (例如 Ubuntu)。</li>
<li><strong>WSL 中的 Node.js 和 npx：</strong> Node.js 和 npx (npm 自带) 必须安装在<em>你的 WSL 发行版内部</em>。
<ul>
<li>强烈建议在 WSL 中使用像 <code>nvm</code> (Node Version Manager) 这样的版本管理器来管理 Node.js 版本。这有助于避免权限问题，并允许轻松切换 Node.js 版本。</li>
</ul>
</li>
<li><strong>Cursor IDE：</strong> 已安装在你的 Windows 计算机上。</li>
</ol>
<h2 id="配置步骤">配置步骤<a hidden class="anchor" aria-hidden="true" href="#配置步骤">#</a></h2>
<p>在 WSL 中运行 MCP 服务器的关键是告诉 Cursor 如何使用 WSL 命令行界面启动它们。这通过编辑 <code>mcp.json</code> 文件来完成。</p>
<h3 id="1-定位或创建-mcpjson">1. 定位或创建 <code>mcp.json</code><a hidden class="anchor" aria-hidden="true" href="#1-定位或创建-mcpjson">#</a></h3>
<p>Cursor将其 MCP 服务器配置存储在一个名为 <code>mcp.json</code> 的文件中。在 Windows 上，你通常可以在以下位置找到此文件：</p>
<p><code>C:\\Users\\&lt;YourUserName&gt;\\.cursor\\mcp.json</code></p>
<p>将 <code>&lt;YourUserName&gt;</code> 替换为你的实际 Windows 用户名。如果该文件或 <code>.cursor</code> 目录不存在，Cursor 可能会在你首次尝试通过其 UI 添加 MCP 服务器时创建它，或者你可能需要手动创建它。</p>
<h3 id="2-理解-mcpjson-结构">2. 理解 <code>mcp.json</code> 结构<a hidden class="anchor" aria-hidden="true" href="#2-理解-mcpjson-结构">#</a></h3>
<p><code>mcp.json</code> 文件包含一个 JSON 对象，其中 <code>mcpServers</code>下的每个键代表一个已配置的 MCP 服务器。这是一个基本结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;your-mcp-server-name&#34;</span>: { <span style="color:#75715e">// 你的 MCP 服务器名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;executable_or_wsl&#34;</span>, <span style="color:#75715e">// 可执行文件或 wsl
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;args&#34;</span>: [<span style="color:#e6db74">&#34;argument1&#34;</span>, <span style="color:#e6db74">&#34;argument2&#34;</span>, <span style="color:#e6db74">&#34;command_to_run_in_wsl&#34;</span>], <span style="color:#75715e">// 参数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e">// 是否启用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">// 其他选项，如 &#34;env&#34;, &#34;workingDirectory&#34; 也可以指定
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-wsl-的核心配置">3. WSL 的核心配置<a hidden class="anchor" aria-hidden="true" href="#3-wsl-的核心配置">#</a></h3>
<p>要在 WSL 中运行 MCP 服务器 (通常是一个 <code>npx</code> 命令)，你需要按如下方式配置服务器条目：</p>
<ul>
<li>
<p><code>&quot;command&quot;</code>: 将此设置为 <code>&quot;wsl&quot;</code>。</p>
</li>
<li>
<p><code>&quot;args&quot;</code>: 这将是一个数组。第一个元素告诉 <code>wsl</code> 使用哪个 shell 并执行一个命令字符串。最后一个元素是命令字符串本身。</p>
<ul>
<li><code>bash</code> 示例: <code>[&quot;bash&quot;, &quot;-c&quot;, &quot;npx @some-mcp/package --port {{port}}&quot;]</code></li>
<li><code>zsh</code> 示例: <code>[&quot;zsh&quot;, &quot;-c&quot;, &quot;npx @some-mcp/package --port {{port}}&quot;]</code></li>
</ul>
<p>(注意: <code>{{port}}</code> 是 Cursor 通常用来注入端口号供 MCP 服务器侦听的占位符。如果 MCP 服务器需要端口，请查阅其特定文档。)</p>
</li>
</ul>
<h3 id="4-处理-shell-环境-对-nvm-用户至关重要">4. 处理 Shell 环境 (对 <code>nvm</code> 用户至关重要)<a hidden class="anchor" aria-hidden="true" href="#4-处理-shell-环境-对-nvm-用户至关重要">#</a></h3>
<p>一个常见的问题是，当 Cursor 调用 <code>wsl ... npx ...</code> 时，可能找不到 <code>npx</code> 命令，或者它可能未使用你期望的 Node.js 版本 (特别是如果你使用 <code>nvm</code>)。这是因为 <code>wsl</code> 启动的非交互式 shell 会话可能不会加载你的完整 shell 配置文件 (例如 <code>.bashrc</code>、<code>.zshrc</code>)，而 <code>nvm</code> 和其他 PATH 修改通常是在这些文件中配置的。</p>
<p>以下是两种可靠的解决方案：</p>
<p><strong>解决方案 A：使用 Shell 脚本 (推荐，更清晰)</strong></p>
<p>此方法涉及在你的 WSL 环境中创建一个小型 shell 脚本，该脚本负责设置环境然后运行 <code>npx</code> 命令。</p>
<ol>
<li>
<p><strong>在 WSL 中创建脚本：</strong>
打开你的 WSL 终端并创建一个脚本，例如 <code>~/run_browsermcp.sh</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/zsh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># 如果你使用 bash，则使用 #!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 加载 shell 的 rc 文件以配置 nvm 和其他环境变量</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果需要，请调整 rc 文件的路径</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.zshrc&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>  source <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.zshrc&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.bashrc&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>  source <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.bashrc&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 用于调试：检查正在使用哪个 npx 以及 Node 版本</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># which npx</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># node -v</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 你的 MCP 服务器的实际 npx 命令</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 替换为你需要的特定 MCP 服务器命令</span>
</span></span><span style="display:flex;"><span>npx @browsermcp/mcp@latest --port <span style="color:#f92672">{{</span>port<span style="color:#f92672">}}</span>
</span></span></code></pre></div><p><em>一个例子：</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>zsh -c <span style="color:#e6db74">&#34;source /home/vector/.zshrc &amp;&amp; npx @browsermcp/mcp@latest&#34;</span>
</span></span></code></pre></div><p><em>(注意：直接调用 <code>zsh -c</code>。如果使用此方法，请确保脚本本身是可执行的，并且 <code>.zshrc</code> 的路径正确。)</em></p>
</li>
<li>
<p><strong>使脚本可执行：</strong>
在你的 WSL 终端中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x ~/run_browsermcp.sh
</span></span></code></pre></div><p>(根据需要调整脚本名称)。</p>
</li>
<li>
<p><strong>配置 <code>mcp.json</code>：</strong>
修改你的 <code>mcp.json</code> 以执行此脚本。如果你的 WSL 用户名是 <code>vector</code>，你使用 <code>zsh</code>，并且脚本位于 <code>/home/vector/run_browsermcp.sh</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;browsermcp-wsl&#34;</span>: { <span style="color:#75715e">// 给它一个描述性的名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;zsh&#34;</span>, <span style="color:#75715e">// 或 &#34;bash&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;-c&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/vector/run_browsermcp.sh&#34;</span> <span style="color:#75715e">// WSL 中脚本的完整路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这与你为 <code>browsermcp</code> 提供的 <code>mcp.json</code> 结构相匹配：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;browsermcp&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;zsh&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;-c&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/vector/browsermcp.sh&#34;</span> <span style="color:#75715e">// 你示例中的路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
<p><strong>解决方案 B：直接在 <code>mcp.json</code> 中加载 (Sourcing)</strong></p>
<p>你可以尝试直接在 <code>args</code> 中加载你的 rc 文件。根据 rc 文件的复杂性，这有时可能不太可靠，但如果可行，则更为简洁。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;my-mcp-server-bash&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;bash&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;-ic&#34;</span>, <span style="color:#75715e">// 注意：-i 表示交互式，可能有助于加载 rc 文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;source ~/.bashrc &amp;&amp; npx @some-mcp/package --port {{port}}&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;my-mcp-server-zsh&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;zsh&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;-ic&#34;</span>, <span style="color:#75715e">// 注意：-i 表示交互式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;source ~/.zshrc &amp;&amp; npx @some-mcp/package --port {{port}}&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>如果使用 <code>nvm</code> 并且上述方法仍然失败，你可能需要提供 <code>nvm.sh</code> 和由 <code>nvm</code> 安装的 <code>npx</code> 可执行文件的绝对路径：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;my-mcp-nvm-direct&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;bash&#34;</span>, <span style="color:#75715e">// 或 &#34;zsh&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;-c&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 相应地替换 /home/your_user 和 YOUR_NODE_VERSION
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;source /home/your_user/.nvm/nvm.sh &amp;&amp; /home/your_user/.nvm/versions/node/vXX.YY.Z/bin/npx @some-mcp/package --port {{port}}&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>要在加载 <code>nvm.sh</code> 并使用 <code>nvm use</code> 选择 Node 版本后找到 <code>npx</code> 的完整路径，请在 WSL 终端中运行 <code>which npx</code>。</p>
<h3 id="5-示例配置浏览器交互-mcp">5. 示例：配置浏览器交互 MCP<a hidden class="anchor" aria-hidden="true" href="#5-示例配置浏览器交互-mcp">#</a></h3>
<p>让我们以 <code>@browsermcp/mcp</code> 为例，因为它很常见。</p>
<p>使用<strong>解决方案 A</strong> (如前定义的 shell 脚本 <code>~/run_browsermcp.sh</code>)：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;browsermcp-wsl&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;wsl&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;zsh&#34;</span>, <span style="color:#75715e">// 如果你的脚本和环境使用 bash，则为 &#34;bash&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;-c&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/YOUR_WSL_USERNAME/run_browsermcp.sh&#34;</span> <span style="color:#75715e">// 调整路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;enabled&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;env&#34;</span>: {
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// 可选：如果 MCP 服务器需要特定的环境变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#75715e">// &#34;DEBUG&#34;: &#34;true&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>请记住将 <code>YOUR_WSL_USERNAME</code> 替换为你的实际 WSL 用户名。</p>
<h2 id="验证">验证<a hidden class="anchor" aria-hidden="true" href="#验证">#</a></h2>
<p>保存 <code>mcp.json</code> 后：</p>
<ol>
<li>重新启动 Cursor 或转到 Cursor 设置 -&gt; 功能 -&gt; MCP，然后单击某个服务器旁边或所有 MCP 服务器的刷新图标。</li>
<li>MCP 设置中服务器名称旁边的绿点表示 Cursor 已成功连接到它。</li>
<li>你可能会看到一个由 <code>wsl</code> 启动的新终端窗口弹出。<strong>此窗口必须保持打开状态</strong>才能使 MCP 服务器正常工作。这是以这种方式运行 MCP 服务器时的预期行为。</li>
<li>通过要求 Cursor 执行使用该 MCP 服务器的操作来测试它 (例如，对于 <code>@browsermcp/mcp</code>，在设置好配套的浏览器扩展后，要求它&quot;截取当前浏览器标签页的屏幕截图&quot;)。</li>
</ol>
<h2 id="故障排除">故障排除<a hidden class="anchor" aria-hidden="true" href="#故障排除">#</a></h2>
<ul>
<li><strong><code>npx: command not found</code> 或 Node 版本错误：</strong> 这几乎总是意味着 WSL 内的 shell 环境未正确设置。
<ul>
<li>仔细检查 shell 脚本或直接命令中的路径。</li>
<li>确保 <code>nvm</code> 已正确加载。</li>
<li>如果使用 <code>nvm</code>，请尝试在脚本或命令字符串的开头明确添加 <code>export NVM_DIR=&quot;$HOME/.nvm&quot;</code> 和 <code>[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;</code>。</li>
<li>验证 <code>node</code> 和 <code>npx</code> 确实已安装在你的 WSL 发行版中，并且在加载 rc 文件后可以访问。</li>
</ul>
</li>
<li><strong>MCP 服务器无法连接 (没有绿点)：</strong>
<ul>
<li>检查弹出的 WSL 终端窗口中的输出。它可能包含错误消息。</li>
<li>确保 MCP 服务器的 <code>npx</code> 命令正确，并包含任何必要的参数，如 <code>--port {{port}}</code>。某些 MCP 如果未指定端口，可能会自动分配端口。</li>
<li>防火墙问题：在使用 WSL2 的网络模型时不太常见，但请确保 Windows 防火墙没有阻止与 WSL 的连接。</li>
</ul>
</li>
<li><strong>&ldquo;空白&quot;终端窗口：</strong> 如前所述，每个通过 <code>wsl</code> 启动的 MCP 服务器都会打开一个终端窗口。这是正常的。关闭它将停止 MCP 服务器。</li>
</ul>
<h2 id="结论">结论<a hidden class="anchor" aria-hidden="true" href="#结论">#</a></h2>
<p>配置 Cursor 以在你的 WSL 环境中运行 MCP 服务器，可在 Windows 上提供简化且强大的开发设置。通过仔细设置你的 <code>mcp.json</code> 并确保正确加载 WSL shell 环境，你可以将 AI 功能无缝集成到基于 Linux 的工作流程中。对于处理由 <code>nvm</code> 等工具管理的环境，shell 脚本方法 (解决方案 A) 通常是最稳健的方法。</p>
<h2 id="祝你使用-cursor-和-wsl-编码愉快">祝你使用 Cursor 和 WSL 编码愉快！<a hidden class="anchor" aria-hidden="true" href="#祝你使用-cursor-和-wsl-编码愉快">#</a></h2>


  </div>

  
  

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.mfun.ink/tags/cursor/">Cursor</a></li>
      <li><a href="https://www.mfun.ink/tags/mcp/">MCP</a></li>
      <li><a href="https://www.mfun.ink/tags/wsl/">Wsl</a></li>
      <li><a href="https://www.mfun.ink/tags/windows/">Windows</a></li>
      <li><a href="https://www.mfun.ink/tags/%E5%BC%80%E5%8F%91/">开发</a></li>
      <li><a href="https://www.mfun.ink/tags/%E6%95%99%E7%A8%8B/">教程</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://www.mfun.ink/2025/05/04/hexo-to-hugo-migration/">
    <span class="title"> »</span>
    <br>
    <span>从Hexo迁移到Hugo完全指南</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on x"
            href="https://x.com/intent/tweet/?text=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c&amp;url=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f&amp;hashtags=Cursor%2cMCP%2cWSL%2cWindows%2c%e5%bc%80%e5%8f%91%2c%e6%95%99%e7%a8%8b">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f&amp;title=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c&amp;summary=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c&amp;source=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f&title=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c%20-%20https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on telegram"
            href="https://telegram.me/share/url?text=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c&amp;url=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 在 WSL 中安装 Cursor MCP 服务器以获得无缝开发体验 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%9c%a8%20WSL%20%e4%b8%ad%e5%ae%89%e8%a3%85%20Cursor%20MCP%20%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a5%e8%8e%b7%e5%be%97%e6%97%a0%e7%bc%9d%e5%bc%80%e5%8f%91%e4%bd%93%e9%aa%8c&u=https%3a%2f%2fwww.mfun.ink%2f2025%2f05%2f13%2finstalling-cursor-mcp-in-wsl%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>

  
  <div class="google-auto-ad">

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2789089615690497"
     data-ad-slot="6136665648"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.mfun.ink/">Mengboy&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>




<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
